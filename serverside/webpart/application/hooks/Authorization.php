<?//отвечает за авторизацию и генерацию меню//И вообще всех действий в прегенерации страницы//Также тут он палит браузепclass Authorization {       public function authorize()    {       $CI =& get_instance();		$CI->load->library('session');		$CI->load->helper('url');        $CI->load->model('geoip');        $CI->load->library('user_agent');        $CI->load->model('menu_builder');		$ip_array = explode('.',$_SERVER['REMOTE_ADDR']);		$ip = ($ip_array[0]*16777216) + ($ip_array[1]*65536) + ($ip_array[2]*256) + ($ip_array[3]);		$data=$CI->geoip->load($ip);		$lng=$CI->session->userdata('language');		if($CI->session->userdata('language')!="rus" && $CI->session->userdata('language')!="eng")		if($data=="RU")		{			$CI->session->set_userdata('language',"rus");			$lng="rus";		}		else		{			$CI->session->set_userdata('language',"eng");			$lng="eng";		}		$url=$CI->  uri->uri_string();		$menu=$CI->menu_builder->make($url,$lng);		$CI->session->set_userdata('menu',$menu);		$browser=0;		if(strcmp($CI->agent->browser(),"MSIE")==0 || strcmp($CI->agent->browser(),"Internet Explorer")==0)$browser=1;		$CI->session->set_userdata('browser',$browser);    }} 